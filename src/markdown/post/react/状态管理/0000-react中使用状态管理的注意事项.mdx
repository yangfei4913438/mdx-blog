---
index: 0
title: React中使用状态管理库的注意事项
description: '我们在使用状态管理库的时候，比如: redux、mobx、jotai等等，使用时有什么是需要注意的?'
author: 杨飞
tags: [react, 状态管理, redux, mobx, jotai]
date: 2024-02-27 21:05:01
---

### 一、背景

前端开发场景下，企业级项目通常都会引入状态管理库，不管是`vue`、`react`, 还是`angular`之类的前端框架，都是需要的。

因为简单的父组件层层传值，使用状态提升的方案，基本不可能满足商业项目的状态管理需求。

从顶层往下，一层层的数据传递，遇到了复杂项目，基本就是`数据马拉松`。性能差是不需要思考就能得出的结论。

那么对于中大型项目，应该如何使用状态管理库呢？


### 二、注意事项

#### 1、明确状态管理的需求

并不是所有的项目都需要一个复杂的状态管理库。如果项目较小，或者状态相对简单，React的内置useState和useContext可能就足够了。
在决定引入状态管理库之前，应该评估项目的需要。

#### 2、保持简单且扁平

在处理商业项目的时候，要始终牢记。同样的一个功能，使用的技术方案越简单，表示你的综合能力越强。

`牛刀杀鸡`，对于新手来说是一个很值得炫耀的事情，但是对于专研多年的高手来说，那就是`底蕴`不足的最好例证。

#### 3、基于业务的数据分片。

  以`redux`为例，数据是可以分割成不同的切片的。如果两个模块，没有什么关联，那么你就应该创建至少 2 个数据切片。

  如果是复杂的数据管理，那么还需要进一步的分割。

  因为组件渲染，是会受到外部传递的数据的影响的。如果数据发生了变化，那么组件就会触发重新渲染的逻辑。

  如果大量的无关数据在更新，那么使用这堆数据的组件都会被触发更新逻辑。

  这种就属于设计缺陷了，必须进一步的分割数据切片，降低不必要的触发更新。

  这也是，为什么很多人会讲，不要动不动就使用`redux`这种复杂的状态管理库。

  一个`useCallback`都有使用成本，更何况`redux`这种复杂的状态管理库。

  你说是不是这个逻辑？

#### 4、使用原子化的数据状态管理库

  看完上面的内容，自然而然就会想，如果我不使用`redux`, 有哪些小型的状态管理库可以使用？

  体量比`redux`小的状态管理库有很多，一般我们常用的有`mobx`和`jotai`. 这两个都是相对来说比较轻量化的状态管理库。

  `mobx` 适合对数据管理要求相对更高一些的项目，数据之间有更多的内部处理逻辑。

  `jotai` 是一个纯原子化的状态管理库。目前应用的商业项目也是非常多。


### 三、总结

  我们选择一个技术，一定不是这个技术多牛。而是看这个技术和我们项目的匹配度，匹配度越高，越值得选用。

  做技术的人，千万不能陷入，谁牛逼我就用谁的陷井里去。而且退一万步讲，所谓的牛逼，也是相对而言，否则就不会有那么多的技术可选了。

  技术说到底，都是业务工具，工具没有最强，只有最合适。

  无论什么时候，合适的才是最好的。
