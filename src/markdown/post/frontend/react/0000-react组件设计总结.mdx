---
index: 0
title: react组件设计总结
description: 好的组件设计，可以让你的工作事半功倍，写出的代码就是一种艺术品。
author: 杨飞
tags: [前端, react, 组件设计]
date: 2024-02-14 15:36:39
---

> 好的组件设计，可以让你的工作事半功倍，写出的代码就是一种艺术品。
>
> 不好的设计，会让你的代码编写痛苦万分，降低你对技术的兴趣，直至完全放弃，摸鱼水平日渐提升。

### 前置: 组件的分类
- 组件主要分为父组件、子组件。父子组件又分为 2 个大类:
  - 业务上的父子组件
    > 一般这种是比较上层的组件，和我们正常理解的，父组件里面包裹若干子组件是一样的。
  - 功能上的父子组件
    > 从功能上分，父组件就是容器组件、子组件就是展示组件。
    >
    > 通常来说，功能组件就是业务组件的进一步细化，作为业务的具体细化实现。

- 父组件可以是一个业务上子组件的功能拆分，
  > 比如：
  >
  > 一个子组件拆分成了容器组件和渲染组件，这个容器组件就是子组件内部的父组件，渲染组件就是子组件内部的子组件。
- 一个组件设计的好于不好，要看具体的场景，
  > 比如：
  >
  > 一个小项目，可能就拆分一个顶级父组件和几个二级子组件，这种情况就没必要搞的多细化了。
  >
  > 就好像我们常说的，简单的事情不要弄的复杂化。
  >
  > 我们把一个项目拆分的很细是为了便于维护，一个本来就简单易于维护的项目，你搞复杂了，就是本末倒置了。
  >
  > 很多新入行的同学，很容易陷入这种认知误区，这是一定要注意的。
  >
  > <strong className='text-red-500'>我下面讲的总结，都是基于中大型项目来说的，微小项目根本没必要搞那么多的条条框框。</strong>


### 一、工具人子组件（有利于写单元测试）
- 尽可能将组件拆分的细一些。
- 子组件的功能要具有单一性、原子性。
- 操作的只做操作，渲染的只做渲染，不要混杂。

### 二、父组件掌控一切（有利于写单元测试，有利于维护）
- 子组件不存在自己的状态和方法，如果有，说明这个子组件需要拆分成更细化的父子组件。
- 所有的子组件的状态，都是由父组件传入的。
- 所有的子组件的操作方法，也都是父组件传入的。

### 三、不要篡改父组件的数据（有利于写单元测试，有利于维护）
- 子组件不要在中途修改父组件传入的数据，父组件传递的变量，在父组件之下全局唯一，禁止篡改。
- 子组件需要修改数据，只能通过父组件传递的方法来修改。

### 四、禁用混入（有利于写单元测试，有利于维护）
- 混入是一种很极端的编程手段，禁止一切形式的混入编码。如果有这种需求，只能说明架构设计出了问题。
  > 那些不可思议的问题和需求，99.99% 都是设计缺陷和低级错误导致的。
- 如果真的非改不可，<span className='text-red-500'>请务必通知到，项目组的所有前端开发，且留文档，文档首页加重点醒目提示，项目中存在这个极端设计！！</span>
  > 这么做，是为了告诉所有人，这里有一个和规范冲突的东西，不至于别人维护的时候搞出问题来。
  >
  > 还有一个目的，就是为了让别人知道，有这么一个例外在这里，大家方便的时候，可以拉个会，讨论一下设计方案，群策群力来解决这个问题。

### 五、方法起名全局唯一（有利于维护）
- 如果方法名称不唯一，你会发现查询一个方法的时候，一搜就是一大堆，根本没办法快速定位你需要的方法在哪里。
- 全局唯一命名，可以**参考** `css` 的 `bem` 命名规范(推荐)。
